<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Agile Poker Planning</title>

	<link href="css/bootstrap@5.1.3.min.css" rel="stylesheet">
	<link href="css/styles.css" rel="stylesheet">
</head>

<body>
	<div id="app">
		<div class="center-screen" v-show="showLoading" ref="loadingView">
			<div class="spinner-border text-primary" role="status">
				<span class="visually-hidden">Loading...</span>
			</div>
		</div>
		<div class="container" ref="!showLoading">
			<div class="center-screen">
				<div class="card shadow decorative-card">
					<div class="card-body">
						<div v-show="!roomCreated">
							<h5 class="card-title display-5 mb-4">Koi-koi (こいこい)</h5>
							<img id="koikoiCoverPhoto" class="mb-4"
								src="assets/hanafuda_cards/Hanafuda_January_Hikari_Alt.svg">
							<button type="button" class="btn btn-primary w-100" @click="createRoom"
								ref="createRoomButton">Create
								Room</button>
						</div>
						<div v-show="roomCreated">
							<div class="row">
								<div v-if="isRoomAdmin" class="col-auto">
									<div class="dropdown">
										<button class="btn btn-success dropdown-toggle" type="button"
											id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
											{{ packs[currentPack].title }}
										</button>

										<ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
											<li v-for="pack in packs">
												<a class="dropdown-item" href="#"
													@click="changeCardPack(pack)">{{ pack.title }}</a>
											</li>
										</ul>
									</div>
								</div>
							</div>
							<div class="row mt-4">
								<div v-for="val in packs[currentPack].data" class="col-auto">
									<div class="poker-card" @click="clickedPokerCard(val)">
										<span class="card-value">{{ val }}</span>
									</div>
								</div>
							</div>
							<div class="row mt-5 make-it-neat-padding">
								<ul class="list-group participant-list">
									<li v-for="participant in participants"
										class="list-group-item d-flex align-items-center py-3 participant">
										{{ participant.name }}
										<span v-if="participant.participantID === participantID"
											class="ms-2">(You)</span>
										<span v-if="participant.selection !== '' && !revealed"
											class="badge bg-primary rounded-pill" style="margin-left: auto;"
											ref="voteResults">Voted!</span>
										<span v-else-if="participant.selection !== '' && revealed"
											class="badge bg-primary rounded-pill" style="margin-left: auto;"
											ref="voteResults">{{ participant.selection }}</span>
									</li>
								</ul>
							</div>
							<div v-if="isRoomAdmin" class="row mt-3">
								<div class="col-6">
									<button type="button" class="btn btn-primary w-100"
										@click="reveal">{{ revealButtonText }}</button>
								</div>
								<div class="col-6">
									<button type="button" class="btn btn-secondary w-100" @click="reset">Reset</button>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<script src="js/bootstrap@5.1.3.bundle.min.js"></script>
	<!-- Firebase -->
	<script src="/__/firebase/8.6.1/firebase-app.js"></script>
	<script src="/__/firebase/8.6.1/firebase-firestore.js"></script>
	<script src="/__/firebase/init.js"></script>
	<!-- Utils and app -->
	<script src="js/uuidv4.min.js"></script>
	<script src="js/lodash-4.17.15.min.js"></script>
	<!--script src="js/vue@3.2.31.min.js"></script-->
	<script src="https://unpkg.com/vue@3.2.31/dist/vue.global.js"></script>
	<script src="js/app.js"></script>
</body>

</html>